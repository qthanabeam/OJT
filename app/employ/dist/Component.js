sap.ui.define(["sap/ui/core/UIComponent","sap/ui/Device","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/ui/core/BusyIndicator"],function(e,t,o,s,n){"use strict";return e.extend("ojt.employ.Component",{metadata:{manifest:"json",interfaces:["sap.ui.core.IAsyncContentCreation"]},init:function(){e.prototype.init.apply(this,arguments);this.getRouter().initialize();var s=new o(t);s.setDefaultBindingMode("OneWay");this.setModel(s,"device");var n=new o({isAdmin:false,role:"",userName:"",email:"",scopes:[]});this.setModel(n,"user");this._checkUserRole()},_checkUserRole:function(){var e=this;n.show();fetch("/employee/userInfo",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(e){if(!e.ok){throw new Error("Network response was not ok: "+e.status)}return e.json()}).then(function(t){var o=e.getModel("user");var s=t.scopes&&t.scopes.includes("ojt_employ.Admin");o.setProperty("/isAdmin",s);o.setProperty("/role",s?"Admin":"Viewer");o.setProperty("/userName",t.name||"Unknown");o.setProperty("/email",t.email||"");o.setProperty("/scopes",t.scopes||[]);n.hide()}).catch(function(t){console.error("Error fetching user info:",t);n.hide();s.show("Không thể lấy thông tin người dùng");e.getModel("user").setProperty("/role","Viewer")})}})});
//# sourceMappingURL=Component.js.map